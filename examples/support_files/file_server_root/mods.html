<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Modding Aerys</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Daniel Lowrey">

    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>

  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="/">Aerys</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="/asgi.html">ASGI</a></li>
              <li><a href="/static.html">Static</a></li>
              <li><a href="/apps.html">Applications</a></li>
              <li><a href="/websockets.html">Websockets</a></li>
              <li><a href="/vhosts.html">Vhosts</a></li>
              <li><a href="/encryption.html">Encryption</a></li>
              <li class="active"><a href="/mods.html">Mods</a></li>
            </ul>
          </div><
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Modding and Customization</h1>
      <p class="lead">
        Real-world applications have specific needs far exceeding simple file/application servers.
      </p>
      <p>  
        One of the primary goals of the Aerys project is to make app customization as simple as possible
        without sacrificing performance. As a result the following event hooks are available to
        userland code for "modding" the Aerys server's behavior:
      </p>
      
      <ul>
        <li>onRequest</li>
        <li>beforeResponse</li>
        <li>afterResponse</li>
      </ul>
      
      <p>
        Mods registered for the relevant HTTP request's host are invoked at each step allowing
        application developers to tailor solutions for project-specific needs.
      </p>
      
      <hr />
      
      <h2>Built-in Mods</h2>
      <p>
        As an example of what's possible on the Mod front (and because they're just really useful)
        Aerys comes prepackaged with the following Mods:
      </p>
      
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Mod</th><th>Event(s)</th><th>Description</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td>ErrorPages</td><td>beforeResponse</td>
            <td>
              Intercept error responses before they're sent to the client and assign user-defined
              entity bodies for error respones (400-599).
            </td>
          </tr>
          
          <tr>
            <td>Expect</td><td>onRequest</td>
            <td>
              While Aerys can optionally invoke application handlers after headers are received (but
              before the entity body arrives), this Mod allows the specification of callbacks to
              invoke and return a boolean result on a per-resource basis to answer 100-continue
              requests without cluttering your application code.
            </td>
          </tr>
          
          <tr>
            <td>Limit</td><td>onRequest</td>
            <td>
              Customizable server or host-wide rate-limiting by IP with support for multiple
              interval/rate combinations. Rate-limited clients receive a standard
              <code>429 Too Many Requests</code> response when exceeding defined rate thresholds.
            </td>
          </tr>
          
          <tr>
            <td>Log</td><td>afterResponse</td>
            <td>
              Customizable per-request logging to multiple files and/or processes with built-in
              support for standard logging formats such as the
              <a title="Common Log Format" href="http://en.wikipedia.org/wiki/Common_Log_Format">NCSA Common Log Format</a>
              and the <a title="Combined Log Format" href="http://publib.boulder.ibm.com/tividd/td/ITWSA/ITWSA_info45/en_US/HTML/guide/c-logs.html">NCSA Combined Log Format</a>.
            </td>
          </tr>
          
          <tr>
            <td>SendFile</td><td>beforeResponse</td>
            <td>
              Significantly speeds up file-serving when the static server isn't an option due to 
              login/validation/other application constraints. Application handlers can simply 
              specify a path to the file they wish to return to the client in the <code>X-Sendfile</code>
              header and Aerys will take care of the rest. The SendFile Mod also provides all the 
              benefits of the built-in static file server (caching headers, byte-range requests,
              conditional retrieval, etc).
            </td>
          </tr>
          
          <tr>
            <td>Websocket</td><td>onRequest</td>
            <td>
              While you'll often specify a Websocket handler on its own named virtual host, the 
              Websocket Mod allows applications to overlay websockets endpoint resources <i>on the
              same host</i> as another application handler (static file or application server). For
              example, you might serve static files from <i>http://mysite.com/</i> but overlay a
              websocket chat endpoint at <i>http://mysite.com/chat</i> using the Websocket Mod.
            </td>
          </tr>
          
        </tbody>
      </table>
      
    </div>

    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

  </body>
</html>
